\language[de]
\mainlanguage[de]
\enableregime[utf]

\setupcolors[state=start]       % otherwise you get greyscale

\usetypescript[palatino]
\definetypeface [palatino] [rm] [serif] [palatino] [default]
\switchtotypeface [palatino] [12pt,rm]
%\usetypescript[charter]
%\definetypeface [charter] [rm] [serif] [charter] [default] [encoding=ec]
%\switchtotypeface [charter] [12pt,rm]



\setuppapersize[A4][A4]
\setuppagenumbering[alternative=singlesided]
\setuplayout[header=16pt]
\setuplayout[footer=16pt]
\setuplayout[topspace=1cm]
\setuplayout[leftmargin=1.5cm]
\setuplayout[rightmargin=1cm]
\setuplayout[backspace=2.5cm]
\setuplayout[width=17cm]
\setuplayout[height=27cm]
\setuplayout[footerdistance=3mm]

%\setuptolerance[horizontal,tolerant]
%\setuptolerance[vertical,verytolerant]
%\setuptolerance[{horizontal, tolerant},{vertical, verytolerant}]
\clubpenalty=10000
\widowpenalty=10000

\defineblank[big][2*medium] % workaround für MkIV
%\defineblank[big][small]
%\defineblank[medium][small]

% uncomment the next line to see the layout
%\showframe

\setuppagenumbering[location={footer,right}, style=bold]


\setupinteraction[state=start,  % make hyperlinks active, etc.
  title={APT},
  subtitle={},
  author={},
  keyword={}]
  
  
\def\Author#1{{\sc von #1} \hfill}

  
\def\roemisch#1{\uppercase\expandafter{\romannumeral#1}}

\setupheads[        separator={. }
                    ]

\setuphead[chapter][
                    style=\ss\tfd,
                    page=yes
                    ]

\setuphead[section][
                    style=\ss\bfc,
                    %after={\vskip -1ex},
                    before={\vskip 2ex \page[bigpreference]}
                    ]
\setuphead[subsection][number=no,
                    style=\ss\bfb, 
                    before={\vskip 0ex \page[bigpreference]},
                    %after={\vskip -2ex}
                    ]
\setuphead[subsubsection][number=no,
                    style=\ss\bfa,
                    before={\vskip -0ex \page[bigpreference]},
                    %after={\vskip -0ex}
                    ]

\setuphead[subsubject][textstyle=\ss\tfa,
                    after={\vskip -0.5ex},
                    before={\vskip 0.5ex \page[preference]}
                    ]

\setuphead[subsubsubject][textstyle=\rm\tfa\it,
                    after={\vskip -0.5ex},
                    before={\vskip 0.5ex \page[preference]}
                    ]
                    
\setupdescriptions[definition][
                    headstyle=\ss\bf,
                    location=top,
                    hang=30,
                    before={\vskip -0.5ex},
                    after={\vskip -0.5ex},
                    command=\hskip-0.5cm,
                    inbetween={\vskip -0.8ex},
                    margin=1cm
                    ]
                    
\definecolor [code] [h=DDDDFF]

\definetextbackground[verbatim]
     [
      background=color,
      backgroundcolor=code,
      backgroundoffset=0cm,
      offset=0.5cm,
      frame=of,
      framecolor=black,
      location=paragraph,
      color=black
      ]

                    
% Setup verbatim
\setuptyping[verbbox][margin=1cm,
            numbering=line,
            before={\vskip -0ex \starttextbackground[verbatim]},
            after={\stoptextbackground}]
            
\setuptyping[verbnobox][margin=1cm,
            before={\vskip -1ex},
            after={}
            ]
            
\setuplinenumbering[location=intext,
                    width=1em,
                    style=\ss\tfx
                    ]
   

\setupcaptions[location=bottom,
  align=middle,
  style={\ss\tfx},
  headstyle={\ss\bfxx},
  number=yes]
  
\setuplabeltext[de][figure=Grafik ]

%\setupfloats[
             %before={},
             %after={},
             %spacebefore=medium,
             %spaceafter=medium
 %            ]
  

% Hack für weniger Whitespace bei den Listen, before/after geht nicht
\defineitemgroup[Liste]
% \setupitemize
\setupitemgroup[Liste][each][][
              style=bold,
              %before={\vskip -5ex},
              %after={\vskip -3ex},
              ]
\def\startitemize[#1]{\vskip -0ex \startListe[#1]}
\def\stopitemize{\stopListe \vskip -0ex}


% set inter-paragraph spacing
\setupwhitespace[medium]
% comment the next line to not indent paragraphs
%\setupindenting[small, yes]

